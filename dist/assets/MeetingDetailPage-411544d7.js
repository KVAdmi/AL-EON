import{r as a,m as S,u as B,j as e}from"./index-e4e1323c.js";import{d as D,e as N,f as I}from"./meetingsService-d0e31030.js";function O({title:s,titleId:t,...r},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?a.createElement("title",{id:t},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const F=a.forwardRef(O),W=F;function P({title:s,titleId:t,...r},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?a.createElement("title",{id:t},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const Z=a.forwardRef(P),V=Z;function U({title:s,titleId:t,...r},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?a.createElement("title",{id:t},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const H=a.forwardRef(U),G=H;function Q({title:s,titleId:t,...r},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?a.createElement("title",{id:t},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const X=a.forwardRef(Q),q=X;function z({title:s,titleId:t,...r},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?a.createElement("title",{id:t},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m.75 12 3 3m0 0 3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const J=a.forwardRef(z),E=J;function K({title:s,titleId:t,...r},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?a.createElement("title",{id:t},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"}))}const Y=a.forwardRef(K),ee=Y;function re({title:s,titleId:t,...r},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?a.createElement("title",{id:t},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const se=a.forwardRef(re),te=se;function ae({title:s,titleId:t,...r},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?a.createElement("title",{id:t},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"}))}const ne=a.forwardRef(ae),le=ne;function oe({title:s,titleId:t,...r},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?a.createElement("title",{id:t},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const ce=a.forwardRef(oe),ie=ce;function de({title:s,titleId:t,...r},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?a.createElement("title",{id:t},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"}))}const me=a.forwardRef(de),xe=me,fe=()=>{const{id:s}=S(),t=B(),[r,n]=a.useState(null),[o,m]=a.useState("transcript"),[u,c]=a.useState(!0),[x,k]=a.useState(""),[g,p]=a.useState(!1),[b,f]=a.useState(!1),[j,v]=a.useState(!1);a.useEffect(()=>{L()},[s]);const L=async()=>{try{c(!0);const l=await D(s);n(l)}catch(l){console.error("Error loading meeting:",l),alert("No se pudo cargar la reuniÃ³n")}finally{c(!1)}},C=async()=>{if(r)try{p(!0),await N(r.id,"email"),alert("âœ… Minuta enviada por correo")}catch(l){console.error("Error sending email:",l),alert("âŒ Error al enviar correo")}finally{p(!1)}},M=async()=>{if(r)try{f(!0),await N(r.id,"telegram"),alert("âœ… Minuta enviada por Telegram")}catch(l){console.error("Error sending Telegram:",l),alert("âŒ Error al enviar por Telegram")}finally{f(!1)}},R=async()=>{if(r)try{v(!0),await I(r.id),alert("âœ… Eventos creados en tu calendario")}catch(l){console.error("Error creating events:",l),alert("âŒ Error al crear eventos")}finally{v(!1)}},_=()=>{if(!(r!=null&&r.transcript_text))return;const l=new Blob([r.transcript_text],{type:"text/plain"}),i=URL.createObjectURL(l),d=document.createElement("a");d.href=i,d.download=`${r.title}_transcripcion.txt`,d.click(),URL.revokeObjectURL(i)},$=l=>{const i=Math.floor(l/60),d=Math.floor(l%60);return`${i.toString().padStart(2,"0")}:${d.toString().padStart(2,"0")}`},A=l=>{if(!x.trim())return l;const i=new RegExp(`(${x})`,"gi");return l.split(i).map((h,T)=>i.test(h)?e.jsx("mark",{className:"bg-yellow-200",children:h},T):h)};if(u)return e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!r)return e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[e.jsx("p",{className:"text-lg mb-4",children:"ReuniÃ³n no encontrada"}),e.jsx("button",{onClick:()=>t("/reuniones"),className:"text-blue-600 hover:underline",children:"Volver a reuniones"})]});const w=r.status==="processing"||r.status==="uploading",y=r.status==="error";return e.jsxs("div",{className:"flex flex-col h-full bg-gray-50",children:[e.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>t("/reuniones"),className:"text-gray-600 hover:text-gray-900",children:e.jsx(W,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:r.title}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[new Date(r.created_at).toLocaleString("es-MX",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}),r.audio_duration_seconds&&e.jsxs("span",{className:"ml-3",children:["â€¢ DuraciÃ³n: ",Math.floor(r.audio_duration_seconds/60)," min"]})]})]})]}),!w&&!y&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:C,disabled:g,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400",children:[e.jsx(ee,{className:"w-5 h-5"}),e.jsx("span",{children:g?"Enviando...":"Enviar por Email"})]}),e.jsxs("button",{onClick:M,disabled:b,className:"flex items-center space-x-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-400",children:[e.jsx(xe,{className:"w-5 h-5"}),e.jsx("span",{children:b?"Enviando...":"Enviar por Telegram"})]}),e.jsxs("button",{onClick:R,disabled:j,className:"flex items-center space-x-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:bg-gray-400",children:[e.jsx(V,{className:"w-5 h-5"}),e.jsx("span",{children:j?"Creando...":"Crear Eventos"})]})]})]}),w&&e.jsxs("div",{className:"mt-4 bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600 mr-3"}),e.jsx("span",{className:"text-blue-800",children:"Procesando tu reuniÃ³n... esto puede tardar unos minutos"})]}),y&&e.jsx("div",{className:"mt-4 bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-red-800",children:["âŒ Error al procesar: ",r.error_message||"Error desconocido"]})}),e.jsxs("div",{className:"flex space-x-6 mt-4 border-b border-gray-200",children:[e.jsx("button",{onClick:()=>m("transcript"),className:`pb-3 px-1 font-medium text-sm transition-colors ${o==="transcript"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`,children:"TranscripciÃ³n"}),e.jsx("button",{onClick:()=>m("minuta"),className:`pb-3 px-1 font-medium text-sm transition-colors ${o==="minuta"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`,children:"Minuta"}),e.jsx("button",{onClick:()=>m("documentos"),className:`pb-3 px-1 font-medium text-sm transition-colors ${o==="documentos"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`,children:"Documentos"})]})]}),e.jsxs("div",{className:"flex-1 overflow-auto",children:[o==="transcript"&&e.jsx(ue,{meeting:r,searchQuery:x,setSearchQuery:k,highlightSearchText:A,formatTimestamp:$,onDownload:_}),o==="minuta"&&e.jsx(he,{meeting:r}),o==="documentos"&&e.jsx(ge,{meeting:r})]})]})},ue=({meeting:s,searchQuery:t,setSearchQuery:r,highlightSearchText:n,formatTimestamp:o,onDownload:m})=>{if(!s.transcript_text&&!s.transcript_json)return e.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:e.jsx("p",{children:"No hay transcripciÃ³n disponible"})});const u=s.transcript_json&&Array.isArray(s.transcript_json);return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6 flex items-center space-x-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ie,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),e.jsx("input",{type:"text",value:t,onChange:c=>r(c.target.value),placeholder:"Buscar en la transcripciÃ³n...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("button",{onClick:m,className:"flex items-center space-x-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:[e.jsx(E,{className:"w-5 h-5"}),e.jsx("span",{children:"Descargar"})]})]}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:u?e.jsx("div",{className:"space-y-4",children:s.transcript_json.map((c,x)=>e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("span",{className:"text-sm text-gray-500 font-mono min-w-[60px]",children:o(c.start)}),e.jsx("p",{className:"text-gray-800 leading-relaxed",children:n(c.text)})]},x))}):e.jsx("p",{className:"text-gray-800 leading-relaxed whitespace-pre-wrap",children:n(s.transcript_text)})})]})},he=({meeting:s})=>s.minutes_summary?e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"ðŸ“‹ Resumen"}),e.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:s.minutes_summary})]}),s.minutes_agreements&&s.minutes_agreements.length>0&&e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(G,{className:"w-6 h-6 text-green-600 mr-2"}),"Acuerdos"]}),e.jsx("div",{className:"space-y-3",children:s.minutes_agreements.map((t,r)=>e.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-green-50 rounded-lg",children:[e.jsxs("span",{className:"text-green-600 font-semibold",children:[r+1,"."]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-gray-800",children:t.text}),t.assignee&&e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["ðŸ‘¤ Responsable: ",t.assignee]}),t.date&&e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["ðŸ“… Fecha: ",t.date]})]})]},r))})]}),s.minutes_pending&&s.minutes_pending.length>0&&e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(q,{className:"w-6 h-6 text-orange-600 mr-2"}),"Pendientes"]}),e.jsx("div",{className:"space-y-3",children:s.minutes_pending.map((t,r)=>e.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-orange-50 rounded-lg",children:[e.jsxs("span",{className:"text-orange-600 font-semibold",children:[r+1,"."]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-gray-800",children:t.text}),t.priority&&e.jsxs("p",{className:"text-sm text-orange-600 mt-1 font-medium",children:["Prioridad: ",t.priority]})]})]},r))})]}),s.minutes_decisions&&s.minutes_decisions.length>0&&e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(le,{className:"w-6 h-6 text-blue-600 mr-2"}),"Decisiones"]}),e.jsx("div",{className:"space-y-3",children:s.minutes_decisions.map((t,r)=>e.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-blue-50 rounded-lg",children:[e.jsxs("span",{className:"text-blue-600 font-semibold",children:[r+1,"."]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-gray-800",children:t.text}),t.impact&&e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["ðŸ’¡ Impacto: ",t.impact]})]})]},r))})]}),s.minutes_risks&&s.minutes_risks.length>0&&e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(te,{className:"w-6 h-6 text-red-600 mr-2"}),"Riesgos"]}),e.jsx("div",{className:"space-y-3",children:s.minutes_risks.map((t,r)=>e.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-red-50 rounded-lg",children:[e.jsxs("span",{className:"text-red-600 font-semibold",children:[r+1,"."]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-gray-800",children:t.text}),t.severity&&e.jsxs("p",{className:"text-sm text-red-600 mt-1 font-medium",children:["âš ï¸ Severidad: ",t.severity]})]})]},r))})]})]}):e.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:e.jsx("p",{children:"La minuta se estÃ¡ generando..."})}),ge=({meeting:s})=>s.attachments&&s.attachments.length>0?e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.attachments.map((r,n)=>e.jsx("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",className:"bg-white rounded-lg border border-gray-200 p-4 hover:border-blue-500 hover:shadow-md transition-all",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(E,{className:"w-8 h-8 text-gray-400"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:r.name}),r.type&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:r.type.toUpperCase()})]})]})},n))})}):e.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:e.jsx("p",{children:"No hay documentos adjuntos"})});export{fe as default};
