import{c as U,r as b,j as e,X as H,u as ie,e as de,s as p}from"./index-e4e1323c.js";import{E as me}from"./eye-off-ed9c0be4.js";import{E as ue}from"./eye-3ec80a3c.js";import{W as xe,a as pe,C as ye,b as ve,S as be,M as he,s as fe,r as ge,g as X}from"./notifications-f9b68795.js";import{A as je}from"./arrow-left-1a8dd8e5.js";import{S as _e}from"./save-8c42dcad.js";import{U as J}from"./user-15a3f646.js";import{M as Ne}from"./mic-5fe6cbf6.js";import{B as D}from"./bell-a4a3aff2.js";import{U as Z}from"./upload-d0cbcdb1.js";import{V as Q}from"./volume-2-8c08ca19.js";import{D as Ce}from"./download-d08d90ee.js";import{T as we}from"./trash-2-720af3a0.js";const ee=U("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),ke=U("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]),Se=U("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),Ee=U("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),re=U("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),Ae=U("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);function ze({integration:g,isOpen:a,onClose:y,onSave:i}){var z;const[h,_]=b.useState({}),[E,R]=b.useState({}),[k,M]=b.useState(!1);if(!a||!g)return null;const F=async u=>{u.preventDefault(),M(!0);try{await i(g.name,h),y()}catch(f){console.error("Error saving integration:",f),alert("Error al guardar: "+f.message)}finally{M(!1)}},A=u=>({aws_access_key:{label:"AWS Access Key ID",type:"text",placeholder:"AKIA..."},aws_secret_key:{label:"AWS Secret Access Key",type:"password",placeholder:"wJalrXUtnFEMI/K7MDENG..."},aws_region:{label:"AWS Region",type:"select",options:["us-east-1","us-west-2","eu-west-1","ap-southeast-1"]},github_token:{label:"GitHub Personal Access Token",type:"password",placeholder:"ghp_..."},netlify_token:{label:"Netlify Personal Access Token",type:"password",placeholder:"nfp_..."},google_play_key:{label:"Google Play Service Account JSON",type:"textarea",placeholder:'{ "type": "service_account", ... }'},app_store_key:{label:"App Store Connect API Key",type:"password",placeholder:"key_..."}})[u]||{label:u,type:"text"};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 overflow-y-auto",style:{backgroundColor:"rgba(0, 0, 0, 0.7)"},children:e.jsxs("div",{className:"w-full max-w-2xl rounded-2xl p-4 md:p-6 shadow-xl my-8 max-h-[90vh] overflow-y-auto",style:{backgroundColor:"var(--color-bg-secondary)"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h2",{className:"text-xl md:text-2xl font-bold truncate",style:{color:"var(--color-text-primary)"},children:["Configurar ",g.name]}),e.jsx("p",{className:"text-xs md:text-sm mt-1 truncate",style:{color:"var(--color-text-secondary)"},children:g.description})]}),e.jsx("button",{onClick:y,className:"p-2 rounded-xl hover:bg-opacity-80 transition-colors flex-shrink-0",style:{backgroundColor:"var(--color-bg-tertiary)"},children:e.jsx(H,{size:20,style:{color:"var(--color-text-primary)"}})})]}),e.jsxs("form",{onSubmit:F,className:"space-y-4",children:[(z=g.fields)==null?void 0:z.map(u=>{const f=A(u),T=f.type==="password",C=E[u];return e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-text-primary)"},children:f.label}),f.type==="select"?e.jsx("select",{value:h[u]||f.options[0],onChange:N=>_({...h,[u]:N.target.value}),className:"w-full px-4 py-3 rounded-2xl border focus:outline-none focus:ring-2",style:{backgroundColor:"var(--color-bg-tertiary)",borderColor:"var(--color-border)",color:"var(--color-text-primary)"},children:f.options.map(N=>e.jsx("option",{value:N,children:N},N))}):f.type==="textarea"?e.jsx("textarea",{value:h[u]||"",onChange:N=>_({...h,[u]:N.target.value}),placeholder:f.placeholder,rows:6,className:"w-full px-4 py-3 rounded-2xl border focus:outline-none focus:ring-2 font-mono text-sm",style:{backgroundColor:"var(--color-bg-tertiary)",borderColor:"var(--color-border)",color:"var(--color-text-primary)"}}):e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:T&&!C?"password":"text",value:h[u]||"",onChange:N=>_({...h,[u]:N.target.value}),placeholder:f.placeholder,className:"w-full px-4 py-3 rounded-2xl border focus:outline-none focus:ring-2",style:{backgroundColor:"var(--color-bg-tertiary)",borderColor:"var(--color-border)",color:"var(--color-text-primary)",paddingRight:T?"3rem":"1rem"}}),T&&e.jsx("button",{type:"button",onClick:()=>R({...E,[u]:!C}),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 hover:bg-opacity-80 rounded-lg",style:{color:"var(--color-text-secondary)"},children:C?e.jsx(me,{size:18}):e.jsx(ue,{size:18})})]})]},u)}),e.jsx("div",{className:"p-4 rounded-xl border",style:{backgroundColor:"rgba(59, 130, 246, 0.1)",borderColor:"rgba(59, 130, 246, 0.3)"},children:e.jsxs("p",{className:"text-sm",style:{color:"var(--color-text-secondary)"},children:["üí° ",e.jsx("strong",{children:"Seguridad:"})," Tus credenciales se almacenan de forma segura y encriptada en Supabase. Nunca se exponen en el c√≥digo del cliente."]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4 mt-4 border-t",style:{borderColor:"var(--color-border)"},children:[e.jsx("button",{type:"button",onClick:y,className:"w-full sm:flex-1 px-6 py-3 rounded-2xl font-medium transition-colors text-sm md:text-base",style:{backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text-primary)"},children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:k,className:"w-full sm:flex-1 px-6 py-3 rounded-2xl font-medium transition-colors text-sm md:text-base",style:{backgroundColor:"var(--color-accent)",color:"white",opacity:k?.6:1},children:k?"Guardando...":"Guardar"})]})]})]})})}let W=[];function Be(){const g=ie(),{user:a,refreshProfile:y}=de(),i=b.useRef(null),h=b.useRef(null),[_,E]=b.useState("general"),[R,k]=b.useState(!0),[M,F]=b.useState(!1),[A,z]=b.useState(!1),[u,f]=b.useState("checking"),[T,C]=b.useState(!1),[N,I]=b.useState(!1),[m,L]=b.useState({display_name:"",email:"",preferred_language:"es",timezone:"America/Mexico_City",theme:"system",role:"USER",assistant_avatar_url:null,user_avatar_url:null}),[r,x]=b.useState({ai_model:"gpt-4",ai_temperature:.7,context_persistent:!0,voice_enabled:!1,tts_enabled:!1,tts_gender:"female",tts_voice_name:null,tts_lang:"es-MX"}),[V,$]=b.useState([]);b.useState(!1);const[s,S]=b.useState({isOpen:!1,integration:null}),w=[{id:"general",label:"General",icon:e.jsx(J,{size:18})},{id:"personalization",label:"Personalizaci√≥n",icon:e.jsx(Ee,{size:18})},{id:"voice",label:"Voz",icon:e.jsx(Ne,{size:18})},{id:"memory",label:"Memoria",icon:e.jsx(ee,{size:18})},{id:"integrations",label:"Integraciones",icon:e.jsx(ke,{size:18})},{id:"developer",label:"Desarrollador",icon:e.jsx(ye,{size:18})},{id:"notifications",label:"Notificaciones",icon:e.jsx(D,{size:18})},{id:"data",label:"Datos y privacidad",icon:e.jsx(re,{size:18})}];b.useEffect(()=>{K();const l=setInterval(K,3e4);return()=>clearInterval(l)},[]),b.useEffect(()=>(v(),window.speechSynthesis&&window.speechSynthesis.addEventListener("voiceschanged",v),()=>{window.speechSynthesis&&window.speechSynthesis.removeEventListener("voiceschanged",v)}),[]);function v(){if(!window.speechSynthesis){console.warn("[TTS] Web Speech API no disponible en este navegador");return}const l=window.speechSynthesis.getVoices();console.log("[TTS] Voces disponibles:",l.length);const t=l.filter(d=>d.lang.startsWith("es")||d.lang.startsWith("es-MX"));if($(t),W=t,!r.tts_voice_name&&t.length>0){const d=t.find(n=>n.lang==="es-MX"||n.name.toLowerCase().includes("mexico"));d&&x(n=>({...n,tts_voice_name:d.name}))}}async function K(){try{const t="https://api.al-eon.com/api/ai/chat";console.log("üè• Health check URL =>",t);const d=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mode:"universal",workspaceId:"core",userId:"health-check",messages:[{role:"user",content:"ping"}]})});f(d.ok?"online":"error")}catch{f("offline")}}b.useEffect(()=>{Y()},[a]);async function Y(){var l,t,d;if(a)try{k(!0);const{data:{session:n}}=await p.auth.getSession();if(!((l=n==null?void 0:n.user)!=null&&l.id)){console.warn("‚ö†Ô∏è No hay sesi√≥n activa - usando defaults en memoria"),L({display_name:"",email:(a==null?void 0:a.email)||"",preferred_language:"es",timezone:"America/Mexico_City",theme:"system",role:"USER"}),x({ai_model:"gpt-4",ai_temperature:.7,context_persistent:!0,voice_enabled:!1}),k(!1);return}const{data:o,error:j}=await p.from("user_profiles").select("*").eq("user_id",n.user.id).single();j&&(j.code==="42501"||(t=j.message)!=null&&t.includes("permission denied"))&&console.warn("‚ö†Ô∏è Perfil no accesible (403), usando defaults"),L({display_name:(o==null?void 0:o.display_name)||"",email:(o==null?void 0:o.email)||n.user.email||"",preferred_language:(o==null?void 0:o.preferred_language)||"es",timezone:(o==null?void 0:o.timezone)||"America/Mexico_City",theme:(o==null?void 0:o.theme)||"system",role:(o==null?void 0:o.role)||"USER",preferred_name:(o==null?void 0:o.preferred_name)||"",assistant_name:(o==null?void 0:o.assistant_name)||"Luma",tone_pref:(o==null?void 0:o.tone_pref)||"barrio",assistant_avatar_url:(o==null?void 0:o.assistant_avatar_url)||null,user_avatar_url:(o==null?void 0:o.user_avatar_url)||null});const{data:c,error:P}=await p.from("user_settings").select("*").eq("user_id",n.user.id).single();P&&(P.code==="42501"||(d=P.message)!=null&&d.includes("permission denied"))&&console.warn("‚ö†Ô∏è Settings no accesibles (403), usando defaults"),x({ai_model:(c==null?void 0:c.ai_model)||"gpt-4",ai_temperature:(c==null?void 0:c.ai_temperature)||.7,context_persistent:(c==null?void 0:c.context_persistent)??!0,voice_enabled:(c==null?void 0:c.voice_enabled)??!1,tts_enabled:(c==null?void 0:c.tts_enabled)??!1,tts_gender:(c==null?void 0:c.tts_gender)||"female",tts_voice_name:(c==null?void 0:c.tts_voice_name)||null,tts_lang:(c==null?void 0:c.tts_lang)||"es-MX"})}catch(n){console.error("Error cargando datos:",n)}finally{k(!1)}}async function ae(){var l,t,d;if(a)try{F(!0);const{data:{session:n}}=await p.auth.getSession();if(!((l=n==null?void 0:n.user)!=null&&l.id)){console.warn("‚ö†Ô∏è No se pueden guardar cambios sin sesi√≥n activa"),alert("No hay sesi√≥n activa. Por favor, inicia sesi√≥n nuevamente.");return}const{error:o}=await p.from("user_profiles").update({display_name:m.display_name,preferred_language:m.preferred_language,timezone:m.timezone,theme:m.theme,preferred_name:m.preferred_name,assistant_name:m.assistant_name,tone_pref:m.tone_pref,assistant_avatar_url:m.assistant_avatar_url}).eq("user_id",n.user.id);if(o&&!(o.code==="42501"||(t=o.message)!=null&&t.includes("permission denied")))throw o;const{error:j}=await p.from("user_settings").update({ai_model:r.ai_model,ai_temperature:r.ai_temperature,context_persistent:r.context_persistent,voice_enabled:r.voice_enabled}).eq("user_id",n.user.id);if(j&&!(j.code==="42501"||(d=j.message)!=null&&d.includes("permission denied")))throw j;z(!0),setTimeout(()=>z(!1),2e3),y&&await y()}catch(n){console.error("Error guardando cambios:",n),alert("Error al guardar cambios: "+n.message)}finally{F(!1)}}async function oe(l){var d,n;const t=(d=l.target.files)==null?void 0:d[0];if(t){if(!t.type.startsWith("image/")){alert("Por favor selecciona una imagen v√°lida");return}try{C(!0);const{data:{session:o}}=await p.auth.getSession();if(!((n=o==null?void 0:o.user)!=null&&n.id)){alert("No hay sesi√≥n activa");return}const j=t.name.split(".").pop(),c=`${o.user.id}/avatar-${Date.now()}.${j}`;if(m.assistant_avatar_url){const B=m.assistant_avatar_url.split("/").slice(-2).join("/");await p.storage.from("ale-avatars").remove([B])}const{data:P,error:q}=await p.storage.from("ale-avatars").upload(c,t,{cacheControl:"3600",upsert:!1});if(q)throw q;const{data:{publicUrl:G}}=p.storage.from("ale-avatars").getPublicUrl(c);console.log("[Avatar] URL p√∫blica generada:",G),L({...m,assistant_avatar_url:G});const{error:O}=await p.from("user_profiles").update({assistant_avatar_url:G}).eq("user_id",o.user.id);if(O)throw console.error("[Avatar] Error actualizando perfil:",O),new Error(`Error guardando avatar: ${O.message}`);console.log("[Avatar] Perfil actualizado exitosamente"),y&&await y(),alert("‚úÖ Avatar actualizado correctamente")}catch(o){console.error("Error subiendo avatar:",o),alert("Error al subir avatar: "+o.message)}finally{C(!1)}}}async function se(){var l;if(confirm("¬øEliminar el avatar de AL-E?"))try{C(!0);const{data:{session:t}}=await p.auth.getSession();if(!((l=t==null?void 0:t.user)!=null&&l.id))return;if(m.assistant_avatar_url){const d=m.assistant_avatar_url.split("/").slice(-2).join("/");await p.storage.from("ale-avatars").remove([d])}await p.from("user_profiles").update({assistant_avatar_url:null}).eq("user_id",t.user.id),L({...m,assistant_avatar_url:null}),y&&await y(),alert("‚úÖ Avatar eliminado")}catch(t){console.error("Error eliminando avatar:",t),alert("Error al eliminar avatar: "+t.message)}finally{C(!1)}}async function te(l){var d,n;const t=(d=l.target.files)==null?void 0:d[0];if(t){if(!t.type.startsWith("image/")){alert("Por favor selecciona una imagen v√°lida");return}try{I(!0);const{data:{session:o}}=await p.auth.getSession();if(!((n=o==null?void 0:o.user)!=null&&n.id)){alert("No hay sesi√≥n activa");return}const j=t.name.split(".").pop(),c=`${o.user.id}/user-avatar-${Date.now()}.${j}`;if(m.user_avatar_url){const B=m.user_avatar_url.split("/").slice(-2).join("/");await p.storage.from("ale-avatars").remove([B])}const{data:P,error:q}=await p.storage.from("ale-avatars").upload(c,t,{cacheControl:"3600",upsert:!1});if(q)throw q;const{data:{publicUrl:G}}=p.storage.from("ale-avatars").getPublicUrl(c);L({...m,user_avatar_url:G});const{error:O}=await p.from("user_profiles").update({user_avatar_url:G}).eq("user_id",o.user.id);if(O)throw new Error(`Error guardando avatar: ${O.message}`);y&&await y(),alert("‚úÖ Tu avatar se actualiz√≥ correctamente")}catch(o){console.error("Error subiendo avatar del usuario:",o),alert("Error al subir avatar: "+o.message)}finally{I(!1)}}}async function le(){var l;if(confirm("¬øEliminar tu avatar?"))try{I(!0);const{data:{session:t}}=await p.auth.getSession();if(!((l=t==null?void 0:t.user)!=null&&l.id))return;if(m.user_avatar_url){const d=m.user_avatar_url.split("/").slice(-2).join("/");await p.storage.from("ale-avatars").remove([d])}await p.from("user_profiles").update({user_avatar_url:null}).eq("user_id",t.user.id),L({...m,user_avatar_url:null}),y&&await y(),alert("‚úÖ Avatar eliminado")}catch(t){console.error("Error eliminando avatar:",t),alert("Error al eliminar avatar: "+t.message)}finally{I(!1)}}async function ce(l,t){var c;const{data:{session:d}}=await p.auth.getSession();if(!((c=d==null?void 0:d.user)!=null&&c.id))return;const n={};Object.keys(t).forEach(P=>{n[P]=t[P]});const o=`${l.toLowerCase().replace(/\s+/g,"_")}_configured`;n[o]=!0;const{error:j}=await p.from("user_profiles").update(n).eq("user_id",d.user.id);if(j)throw j;await Y()}if(R)return e.jsx("div",{className:"h-screen flex items-center justify-center",style:{backgroundColor:"var(--color-bg-primary)"},children:e.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"Cargando configuraci√≥n..."})});const ne=m.role==="ROOT"||m.email==="pgaribay@infinitykode.com";return e.jsxs("div",{className:"h-screen flex flex-col",style:{backgroundColor:"var(--color-bg-primary)"},children:[e.jsx("div",{className:"border-b",style:{borderColor:"var(--color-border)"},children:e.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>g(-1),className:"p-2 rounded-2xl hover:opacity-80 transition-all",style:{color:"var(--color-text-secondary)"},children:e.jsx(je,{size:20})}),e.jsx("h1",{className:"text-2xl font-semibold",style:{color:"var(--color-text-primary)"},children:"Configuraci√≥n"}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 rounded-full text-xs",style:{backgroundColor:u==="online"?"rgba(16, 185, 129, 0.1)":u==="offline"?"rgba(239, 68, 68, 0.1)":"rgba(251, 191, 36, 0.1)",color:u==="online"?"#10b981":u==="offline"?"#ef4444":"#fbbf24"},children:[u==="online"?e.jsx(Ae,{size:12}):e.jsx(xe,{size:12}),e.jsx("span",{children:u==="online"?"Conectado":u==="offline"?"Desconectado":"Verificando..."})]})]}),e.jsxs("button",{onClick:ae,disabled:M||A,className:"flex items-center gap-2 px-4 py-2 rounded-2xl font-medium transition-all",style:{backgroundColor:A?"#10b981":"var(--color-accent)",color:"white",opacity:M?.7:1,cursor:M||A?"not-allowed":"pointer"},children:[A?e.jsx(pe,{size:18}):e.jsx(_e,{size:18}),M?"Guardando...":A?"¬°Guardado!":"Guardar cambios"]})]})}),e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsxs("div",{className:"max-w-6xl mx-auto h-full flex flex-col md:flex-row gap-4 md:gap-6 p-4 md:p-6",children:[e.jsxs("div",{className:"md:w-64 flex-shrink-0",children:[e.jsx("div",{className:"flex md:hidden overflow-x-auto gap-2 pb-2 -mx-4 px-4",children:w.map(l=>e.jsxs("button",{onClick:()=>E(l.id),className:"flex items-center gap-2 px-4 py-2.5 rounded-2xl transition-all whitespace-nowrap flex-shrink-0",style:{backgroundColor:_===l.id?"var(--color-accent)":"var(--color-bg-secondary)",color:_===l.id?"#FFFFFF":"var(--color-text-secondary)",fontWeight:_===l.id?600:400,border:_===l.id?"none":"1px solid var(--color-border)"},children:[l.icon,e.jsx("span",{className:"text-sm",children:l.label})]},l.id))}),e.jsx("div",{className:"hidden md:block space-y-1",children:w.map(l=>e.jsxs("button",{onClick:()=>E(l.id),className:"w-full flex items-center gap-3 px-4 py-3 rounded-2xl transition-all text-left",style:{backgroundColor:_===l.id?"var(--color-bg-secondary)":"transparent",color:_===l.id?"var(--color-text-primary)":"var(--color-text-secondary)",fontWeight:_===l.id?500:400},children:[l.icon,e.jsx("span",{className:"text-sm",children:l.label})]},l.id))})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"rounded-2xl p-4 md:p-8 border",style:{backgroundColor:"var(--color-bg-secondary)",borderColor:"var(--color-border)"},children:e.jsx(Le,{activeTab:_,profile:m,setProfile:L,settings:r,setSettings:x,isOwner:ne,backendStatus:u,setIntegrationModal:S,uploadingAvatar:T,setUploadingAvatar:C,handleAvatarUpload:oe,handleAvatarDelete:se,uploadingUserAvatar:N,setUploadingUserAvatar:I,handleUserAvatarUpload:te,handleUserAvatarDelete:le,userAvatarInputRef:h,fileInputRef:i})})})]})}),e.jsx(ze,{integration:s.integration,isOpen:s.isOpen,onClose:()=>S({isOpen:!1,integration:null}),onSave:ce})]})}function Le({activeTab:g,profile:a,setProfile:y,settings:i,setSettings:h,isOwner:_,backendStatus:E,setIntegrationModal:R,uploadingAvatar:k,setUploadingAvatar:M,handleAvatarUpload:F,handleAvatarDelete:A,uploadingUserAvatar:z,setUploadingUserAvatar:u,handleUserAvatarUpload:f,handleUserAvatarDelete:T,userAvatarInputRef:C,fileInputRef:N}){const[I,m]=b.useState({push_enabled:!1,email_daily:!0,email_mentions:!0,notify_responses:!1,notify_errors:!0});b.useEffect(()=>{typeof Notification<"u"&&m(r=>({...r,push_enabled:Notification.permission==="granted"}))},[]);const L=(r,x)=>{m(V=>({...V,[r]:x})),h(V=>({...V,[`${r}`]:x}))};if(g==="general")return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",style:{color:"var(--color-text-primary)"},children:"General"}),e.jsx("p",{className:"text-sm",style:{color:"var(--color-text-secondary)"},children:"Configuraci√≥n b√°sica de tu cuenta"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-text-primary)"},children:"Tu foto de perfil"}),e.jsx("p",{className:"text-xs mb-3",style:{color:"var(--color-text-tertiary)"},children:"Esta foto aparecer√° en tus mensajes del chat"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-20 h-20 rounded-full flex items-center justify-center overflow-hidden border-2",style:{borderColor:"var(--color-accent)",backgroundColor:a.user_avatar_url?"transparent":"var(--color-accent-light)"},children:a.user_avatar_url?e.jsx("img",{src:a.user_avatar_url,alt:"Tu avatar",className:"w-full h-full object-cover"}):e.jsx(J,{size:32,style:{color:"var(--color-accent)"}})}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("input",{ref:C,type:"file",accept:"image/*",onChange:f,className:"hidden"}),e.jsx("button",{onClick:()=>{var r;return(r=C.current)==null?void 0:r.click()},disabled:z,className:"flex items-center gap-2 px-4 py-2 rounded-xl border transition-all hover:opacity-80",style:{backgroundColor:"var(--color-accent)",borderColor:"var(--color-accent)",color:"#fff"},children:z?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Subiendo..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Z,{size:16}),e.jsx("span",{children:a.user_avatar_url?"Cambiar":"Subir"})]})}),a.user_avatar_url&&e.jsxs("button",{onClick:T,disabled:z,className:"flex items-center gap-2 px-4 py-2 rounded-xl border transition-all hover:opacity-80",style:{backgroundColor:"transparent",borderColor:"var(--color-border)",color:"var(--color-text-secondary)"},children:[e.jsx(H,{size:16}),e.jsx("span",{children:"Eliminar"})]})]})]}),e.jsx("p",{className:"text-xs mt-2",style:{color:"var(--color-text-tertiary)"},children:"Formatos: JPG, PNG, GIF, WEBP. Sin l√≠mite de tama√±o."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-text-primary)"},children:"Nombre para mostrar"}),e.jsx("input",{type:"text",value:a.display_name,onChange:r=>y({...a,display_name:r.target.value}),className:"w-full px-4 py-2 rounded-xl border outline-none focus:ring-2 focus:ring-offset-0 transition-all",style:{backgroundColor:"var(--color-bg-tertiary)",borderColor:"var(--color-border)",color:"var(--color-text-primary)"},placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-text-primary)"},children:"Email"}),e.jsx("input",{type:"email",value:a.email,disabled:!0,className:"w-full px-4 py-2 rounded-xl border opacity-60 cursor-not-allowed",style:{backgroundColor:"var(--color-bg-tertiary)",borderColor:"var(--color-border)",color:"var(--color-text-secondary)"}}),e.jsx("p",{className:"text-xs mt-1",style:{color:"var(--color-text-tertiary)"},children:"El email no se puede cambiar"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-text-primary)"},children:"Idioma preferido"}),e.jsxs("select",{value:a.preferred_language,onChange:r=>y({...a,preferred_language:r.target.value}),className:"w-full px-4 py-2 rounded-xl border outline-none focus:ring-2 transition-all",style:{backgroundColor:"var(--color-bg-tertiary)",borderColor:"var(--color-border)",color:"var(--color-text-primary)"},children:[e.jsx("option",{value:"es",children:"Espa√±ol"}),e.jsx("option",{value:"en",children:"English"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-text-primary)"},children:"Zona horaria"}),e.jsxs("select",{value:a.timezone,onChange:r=>y({...a,timezone:r.target.value}),className:"w-full px-4 py-2 rounded-xl border outline-none focus:ring-2 transition-all",style:{backgroundColor:"var(--color-bg-tertiary)",borderColor:"var(--color-border)",color:"var(--color-text-primary)"},children:[e.jsx("option",{value:"America/Mexico_City",children:"Ciudad de M√©xico (GMT-6)"}),e.jsx("option",{value:"America/New_York",children:"Nueva York (GMT-5)"}),e.jsx("option",{value:"America/Los_Angeles",children:"Los √Ångeles (GMT-8)"}),e.jsx("option",{value:"Europe/Madrid",children:"Madrid (GMT+1)"})]})]})]});if(g==="personalization")return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",style:{color:"var(--color-text-primary)"},children:"Personalizaci√≥n"}),e.jsx("p",{className:"text-sm",style:{color:"var(--color-text-secondary)"},children:"Personaliza tu identidad y c√≥mo AL-E interact√∫a contigo"})]}),e.jsxs("div",{className:"p-5 rounded-2xl border",style:{backgroundColor:"var(--color-bg-tertiary)",borderColor:"var(--color-border)"},children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",style:{color:"var(--color-text-primary)"},children:[e.jsx(J,{size:20}),"Tu Identidad"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-text-primary)"},children:"¬øC√≥mo quieres que te diga?"}),e.jsx("p",{className:"text-xs mb-3",style:{color:"var(--color-text-tertiary)"},children:"El nombre que AL-E usar√° para dirigirse a ti en las conversaciones"}),e.jsx("input",{type:"text",value:a.preferred_name||"",onChange:r=>y({...a,preferred_name:r.target.value}),placeholder:"Ej: Patto, Jefe, Boss",className:"w-full px-4 py-3 rounded-2xl border focus:outline-none focus:ring-2 focus:ring-offset-2",style:{backgroundColor:"var(--color-bg-secondary)",borderColor:"var(--color-border)",color:"var(--color-text-primary)"},maxLength:30})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-text-primary)"},children:"¬øC√≥mo se llama tu IA?"}),e.jsx("p",{className:"text-xs mb-3",style:{color:"var(--color-text-tertiary)"},children:"Dale un nombre personalizado a tu asistente de IA"}),e.jsx("input",{type:"text",value:a.assistant_name||"Luma",onChange:r=>y({...a,assistant_name:r.target.value}),placeholder:"Ej: Luma, Jarvis, Nova",className:"w-full px-4 py-3 rounded-2xl border focus:outline-none focus:ring-2 focus:ring-offset-2",style:{backgroundColor:"var(--color-bg-secondary)",borderColor:"var(--color-border)",color:"var(--color-text-primary)"},maxLength:30})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-text-primary)"},children:["Avatar de ",a.assistant_name||"AL-E"]}),e.jsx("p",{className:"text-xs mb-3",style:{color:"var(--color-text-tertiary)"},children:"Personaliza el avatar de tu asistente (aparecer√° en el chat y sidebar)"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-20 h-20 rounded-full flex items-center justify-center overflow-hidden border-2",style:{borderColor:"var(--color-accent)",backgroundColor:a.assistant_avatar_url?"transparent":"var(--color-accent-light)"},children:a.assistant_avatar_url?e.jsx("img",{src:a.assistant_avatar_url,alt:"Avatar de AL-E",className:"w-full h-full object-cover"}):e.jsx(ve,{size:32,style:{color:"var(--color-accent)"}})}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("input",{ref:N,type:"file",accept:"image/*",onChange:F,className:"hidden"}),e.jsx("button",{onClick:()=>{var r;return(r=N.current)==null?void 0:r.click()},disabled:k,className:"flex items-center gap-2 px-4 py-2 rounded-xl border transition-all hover:opacity-80",style:{backgroundColor:"var(--color-accent)",borderColor:"var(--color-accent)",color:"#fff"},children:k?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Subiendo..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Z,{size:16}),e.jsx("span",{children:a.assistant_avatar_url?"Cambiar":"Subir"})]})}),a.assistant_avatar_url&&e.jsxs("button",{onClick:A,disabled:k,className:"flex items-center gap-2 px-4 py-2 rounded-xl border transition-all hover:opacity-80",style:{backgroundColor:"transparent",borderColor:"var(--color-border)",color:"var(--color-text-secondary)"},children:[e.jsx(H,{size:16}),e.jsx("span",{children:"Eliminar"})]})]})]}),e.jsx("p",{className:"text-xs mt-2",style:{color:"var(--color-text-tertiary)"},children:"Formatos: JPG, PNG, GIF, WEBP. Sin l√≠mite de tama√±o."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-text-primary)"},children:"Tono de conversaci√≥n"}),e.jsx("p",{className:"text-xs mb-3",style:{color:"var(--color-text-tertiary)"},children:"C√≥mo quieres que hable contigo"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[{value:"barrio",label:"Directo",desc:"Sin rodeos, al grano"},{value:"pro",label:"Profesional",desc:"Formal y corporativo"},{value:"neutral",label:"Equilibrado",desc:"Natural y conversacional"}].map(r=>e.jsxs("button",{onClick:()=>y({...a,tone_pref:r.value}),className:"flex flex-col items-start gap-2 p-4 rounded-2xl border-2 transition-all text-left",style:{backgroundColor:a.tone_pref===r.value?"var(--color-accent-light)":"var(--color-bg-secondary)",borderColor:a.tone_pref===r.value?"var(--color-accent)":"var(--color-border)",color:"var(--color-text-primary)"},children:[e.jsx("span",{className:"font-medium",children:r.label}),e.jsx("span",{className:"text-xs",style:{color:"var(--color-text-secondary)"},children:r.desc})]},r.value))})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-text-primary)"},children:"Nombre para mostrar"}),e.jsx("p",{className:"text-xs mb-3",style:{color:"var(--color-text-tertiary)"},children:"Este nombre se mostrar√° en lugar de tu email en la barra lateral"}),e.jsx("input",{type:"text",value:a.display_name||"",onChange:r=>y({...a,display_name:r.target.value}),placeholder:"Tu nombre",className:"w-full px-4 py-3 rounded-2xl border focus:outline-none focus:ring-2 focus:ring-offset-2",style:{backgroundColor:"var(--color-bg-secondary)",borderColor:"var(--color-border)",color:"var(--color-text-primary)"},maxLength:50})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-3",style:{color:"var(--color-text-primary)"},children:"Tema"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{value:"light",label:"Claro",icon:e.jsx(be,{size:20})},{value:"dark",label:"Oscuro",icon:e.jsx(he,{size:20})},{value:"system",label:"Sistema",icon:e.jsx(Se,{size:20})}].map(r=>e.jsxs("button",{onClick:()=>y({...a,theme:r.value}),className:"flex flex-col items-center gap-2 p-4 rounded-xl border-2 transition-all",style:{backgroundColor:a.theme===r.value?"var(--color-accent-light)":"var(--color-bg-tertiary)",borderColor:a.theme===r.value?"var(--color-accent)":"var(--color-border)",color:a.theme===r.value?"var(--color-accent-bright)":"var(--color-text-primary)"},children:[r.icon,e.jsx("span",{className:"text-sm font-medium",children:r.label})]},r.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-text-primary)"},children:"Modelo de IA predeterminado"}),e.jsxs("select",{value:i.ai_model,onChange:r=>h({...i,ai_model:r.target.value}),className:"w-full px-4 py-2 rounded-xl border outline-none focus:ring-2 transition-all",style:{backgroundColor:"var(--color-bg-tertiary)",borderColor:"var(--color-border)",color:"var(--color-text-primary)"},children:[e.jsx("option",{value:"gpt-4",children:"GPT-4 (Recomendado)"}),e.jsx("option",{value:"gpt-3.5-turbo",children:"GPT-3.5 Turbo (M√°s r√°pido)"})]}),e.jsx("p",{className:"text-xs mt-1",style:{color:"var(--color-text-tertiary)"},children:"GPT-4 ofrece respuestas m√°s precisas y contextuales"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-text-primary)"},children:["Creatividad: ",i.ai_temperature.toFixed(1)]}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:i.ai_temperature,onChange:r=>h({...i,ai_temperature:parseFloat(r.target.value)}),className:"w-full h-2 rounded-lg appearance-none cursor-pointer",style:{background:`linear-gradient(to right, var(--color-accent) 0%, var(--color-accent) ${i.ai_temperature*100}%, var(--color-border) ${i.ai_temperature*100}%, var(--color-border) 100%)`}}),e.jsxs("div",{className:"flex justify-between text-xs mt-1",style:{color:"var(--color-text-tertiary)"},children:[e.jsx("span",{children:"Preciso"}),e.jsx("span",{children:"Balanceado"}),e.jsx("span",{children:"Creativo"})]})]})]});if(g==="voice"){const r=Array.isArray(availableVoices)?availableVoices:[],x=r.filter(s=>s.lang==="es-MX"||s.name.toLowerCase().includes("mexico")||s.name.toLowerCase().includes("mexican")),V=r.filter(s=>s.lang.startsWith("es")&&!x.some(S=>S.name===s.name));r.filter(s=>!s.name.toLowerCase().includes("female")&&!s.name.toLowerCase().includes("mujer")&&(s.name.toLowerCase().includes("male")||s.name.toLowerCase().includes("hombre")||s.name.toLowerCase().includes("diego")||s.name.toLowerCase().includes("jorge"))),r.filter(s=>s.name.toLowerCase().includes("female")||s.name.toLowerCase().includes("mujer")||s.name.toLowerCase().includes("paulina")||s.name.toLowerCase().includes("monica"));const $=()=>{if(!window.speechSynthesis){alert("Tu navegador no soporta s√≠ntesis de voz");return}setTestingVoice(!0);const s=new SpeechSynthesisUtterance("Hola, soy tu asistente. As√≠ suena mi voz.");if(s.lang=i.tts_lang,i.tts_voice_name&&r.length>0){const S=r.find(w=>w.name===i.tts_voice_name);S&&(s.voice=S)}s.onend=()=>setTestingVoice(!1),s.onerror=()=>setTestingVoice(!1),window.speechSynthesis.speak(s),console.log("[TTS] Probando voz:",i.tts_voice_name)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",style:{color:"var(--color-text-primary)"},children:"Voz"}),e.jsx("p",{className:"text-sm",style:{color:"var(--color-text-secondary)"},children:"Configura c√≥mo AL-E habla las respuestas usando las voces de tu dispositivo"})]}),e.jsxs("div",{className:"p-5 rounded-xl border flex items-center justify-between",style:{backgroundColor:"var(--color-bg-tertiary)",borderColor:"var(--color-border)"},children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-xl",style:{backgroundColor:"var(--color-accent-light)"},children:e.jsx(Q,{size:24,style:{color:"var(--color-accent)"}})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-1",style:{color:"var(--color-text-primary)"},children:"Respuestas por voz"}),e.jsx("p",{className:"text-sm",style:{color:"var(--color-text-secondary)"},children:"Escucha las respuestas de AL-E autom√°ticamente"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.tts_enabled,onChange:s=>h({...i,tts_enabled:s.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all",style:{backgroundColor:i.tts_enabled?"var(--color-accent)":"#6b7280"}})]})]}),i.tts_enabled&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-5 rounded-xl border space-y-4",style:{backgroundColor:"var(--color-bg-tertiary)",borderColor:"var(--color-border)"},children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",style:{color:"var(--color-text-primary)"},children:"G√©nero de voz"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>{const S=(Array.isArray(availableVoices)?availableVoices:Array.isArray(W)?W:[]).filter(v=>v.lang==="es-MX"||v.name.toLowerCase().includes("mexico")||v.name.toLowerCase().includes("mexican")),w=S.find(v=>v.name.toLowerCase().includes("female")||v.name.toLowerCase().includes("mujer")||v.name.toLowerCase().includes("paulina")||v.name.toLowerCase().includes("monica"))||S.find(v=>!v.name.toLowerCase().includes("male"));h({...i,tts_gender:"female",tts_voice_name:(w==null?void 0:w.name)||null})},className:`p-4 rounded-lg border-2 transition-all ${i.tts_gender==="female"?"border-[var(--color-accent)]":"border-[var(--color-border)]"}`,style:{backgroundColor:i.tts_gender==="female"?"var(--color-accent-light)":"var(--color-bg-secondary)"},children:[e.jsx("div",{className:"text-2xl mb-2",children:"üë©"}),e.jsx("div",{className:"font-medium",style:{color:"var(--color-text-primary)"},children:"Mujer"}),e.jsx("div",{className:"text-xs mt-1",style:{color:"var(--color-text-tertiary)"},children:"Voz femenina mexicana"})]}),e.jsxs("button",{onClick:()=>{const w=(Array.isArray(availableVoices)?availableVoices:Array.isArray(W)?W:[]).filter(v=>v.lang==="es-MX"||v.name.toLowerCase().includes("mexico")||v.name.toLowerCase().includes("mexican")).find(v=>v.name.toLowerCase().includes("male")||v.name.toLowerCase().includes("hombre")||v.name.toLowerCase().includes("diego")||v.name.toLowerCase().includes("jorge"));h({...i,tts_gender:"male",tts_voice_name:(w==null?void 0:w.name)||null})},className:`p-4 rounded-lg border-2 transition-all ${i.tts_gender==="male"?"border-[var(--color-accent)]":"border-[var(--color-border)]"}`,style:{backgroundColor:i.tts_gender==="male"?"var(--color-accent-light)":"var(--color-bg-secondary)"},children:[e.jsx("div",{className:"text-2xl mb-2",children:"üë®"}),e.jsx("div",{className:"font-medium",style:{color:"var(--color-text-primary)"},children:"Hombre"}),e.jsx("div",{className:"text-xs mt-1",style:{color:"var(--color-text-tertiary)"},children:"Voz masculina mexicana"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-text-primary)"},children:"Voz espec√≠fica (opcional)"}),e.jsxs("select",{value:i.tts_voice_name||"",onChange:s=>h({...i,tts_voice_name:s.target.value||null}),className:"w-full px-4 py-2 rounded-lg border",style:{backgroundColor:"var(--color-bg-primary)",borderColor:"var(--color-border)",color:"var(--color-text-primary)"},children:[e.jsx("option",{value:"",children:"Autom√°tico (mejor disponible)"}),x.length>0&&e.jsx("optgroup",{label:"Voces Mexicanas üá≤üáΩ",children:x.map(s=>e.jsxs("option",{value:s.name,children:[s.name," (",s.lang,")"]},s.name))}),V.length>0&&e.jsx("optgroup",{label:"Otras voces en Espa√±ol",children:V.map(s=>e.jsxs("option",{value:s.name,children:[s.name," (",s.lang,")"]},s.name))}),r.length===0&&e.jsx("option",{disabled:!0,children:"No hay voces disponibles"})]})]}),e.jsxs("button",{onClick:$,disabled:testingVoice||r.length===0,className:"w-full px-4 py-2 rounded-lg font-medium transition-all hover:opacity-90 disabled:opacity-50 flex items-center justify-center gap-2",style:{backgroundColor:"var(--color-accent)",color:"#FFFFFF"},children:[e.jsx(Q,{size:18}),testingVoice?"Reproduciendo...":"Probar voz"]})]}),x.length===0&&e.jsx("div",{className:"p-4 rounded-xl border",style:{backgroundColor:"rgba(251, 191, 36, 0.1)",borderColor:"rgba(251, 191, 36, 0.3)"},children:e.jsxs("p",{className:"text-sm",style:{color:"var(--color-text-secondary)"},children:["‚ö†Ô∏è ",e.jsx("strong",{children:"No se encontraron voces mexicanas en tu dispositivo."}),e.jsx("br",{}),V.length>0?"Se usar√°n voces en espa√±ol disponibles.":"Instala voces en espa√±ol en la configuraci√≥n de tu sistema operativo."]})}),e.jsx("div",{className:"p-4 rounded-xl border",style:{backgroundColor:"var(--color-bg-tertiary)",borderColor:"var(--color-border)"},children:e.jsx("p",{className:"text-xs",style:{color:"var(--color-text-tertiary)"},children:"üí° Las voces dependen de tu sistema operativo y navegador. Para mejores resultados, usa Chrome, Edge o Safari con voces instaladas en espa√±ol mexicano."})})]})]})}if(g==="memory")return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",style:{color:"var(--color-text-primary)"},children:"Memoria"}),e.jsx("p",{className:"text-sm",style:{color:"var(--color-text-secondary)"},children:"Controla c√≥mo AL-E recuerda informaci√≥n entre conversaciones"})]}),e.jsxs("div",{className:"p-5 rounded-xl border flex items-center justify-between",style:{backgroundColor:"var(--color-bg-tertiary)",borderColor:"var(--color-border)"},children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-xl",style:{backgroundColor:"var(--color-accent-light)"},children:e.jsx(ee,{size:24,style:{color:"var(--color-accent)"}})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-1",style:{color:"var(--color-text-primary)"},children:"Persistencia de contexto"}),e.jsx("p",{className:"text-sm",style:{color:"var(--color-text-secondary)"},children:"AL-E recordar√° conversaciones previas"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.context_persistent,onChange:r=>h({...i,context_persistent:r.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all",style:{backgroundColor:i.context_persistent?"var(--color-accent)":"#6b7280"}})]})]}),e.jsx("div",{className:"p-4 rounded-xl border",style:{backgroundColor:"rgba(251, 191, 36, 0.1)",borderColor:"rgba(251, 191, 36, 0.3)"},children:e.jsxs("p",{className:"text-sm",style:{color:"var(--color-text-secondary)"},children:["‚ö†Ô∏è ",e.jsx("strong",{children:"Nota:"})," Desactivar la persistencia har√° que cada conversaci√≥n sea independiente. No se compartir√° contexto entre sesiones."]})})]});if(g==="integrations"){const r=[{name:"AL-E Core",description:"Motor de IA principal",status:E==="online"?"connected":"error",category:"core",configurable:!1},{name:"Supabase",description:"Base de datos y autenticaci√≥n",status:"connected",category:"core",configurable:!1},{name:"AWS",description:"Infraestructura en la nube",status:a!=null&&a.aws_configured?"connected":"not-configured",category:"infrastructure",configurable:!0,fields:["aws_access_key","aws_secret_key","aws_region"]},{name:"GitHub",description:"Repositorios y c√≥digo",status:a!=null&&a.github_configured?"connected":"not-configured",category:"development",configurable:!0,fields:["github_token"]},{name:"Netlify",description:"Despliegue de frontend",status:a!=null&&a.netlify_configured?"connected":"not-configured",category:"deployment",configurable:!0,fields:["netlify_token"]},{name:"OpenAI",description:"Modelos de lenguaje",status:"connected",category:"ai",configurable:!1},{name:"Google Play",description:"App Store para Android",status:a!=null&&a.google_play_configured?"connected":"not-configured",category:"mobile",configurable:!0,fields:["google_play_key"]},{name:"App Store Connect",description:"App Store para iOS",status:a!=null&&a.app_store_configured?"connected":"not-configured",category:"mobile",configurable:!0,fields:["app_store_key"]}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",style:{color:"var(--color-text-primary)"},children:"Integraciones"}),e.jsx("p",{className:"text-sm",style:{color:"var(--color-text-secondary)"},children:"Conecta servicios externos con AL-EON. Configura tus claves API aqu√≠."})]}),(a==null?void 0:a.role)==="ROOT"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"pt-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("span",{className:"px-3 py-1 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300 rounded-full text-xs font-semibold",children:"üëë SOLO ROOT"}),e.jsx("h3",{className:"text-lg font-semibold",style:{color:"var(--color-text-primary)"},children:"Integraciones de Desarrollador"})]}),e.jsx("p",{className:"text-sm mb-4",style:{color:"var(--color-text-secondary)"},children:"Configura APIs y servicios de infraestructura"})]}),e.jsx("div",{className:"space-y-3",children:r.map(x=>e.jsxs("div",{className:"p-5 rounded-2xl border flex items-center justify-between",style:{backgroundColor:"var(--color-bg-tertiary)",borderColor:"var(--color-border)"},children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:x.status==="connected"?"#10b981":x.status==="error"?"#ef4444":"#6b7280"}}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium mb-1",style:{color:"var(--color-text-primary)"},children:x.name}),e.jsx("p",{className:"text-sm",style:{color:"var(--color-text-secondary)"},children:x.description})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-sm font-medium",style:{color:x.status==="connected"?"#10b981":x.status==="error"?"#ef4444":"#6b7280"},children:x.status==="connected"?"Conectado":x.status==="error"?"Error":"No configurado"}),x.configurable&&e.jsx("button",{onClick:()=>R({isOpen:!0,integration:x}),className:"px-4 py-2 rounded-2xl text-sm font-medium transition-all",style:{backgroundColor:"var(--color-accent)",color:"#FFFFFF"},children:"Configurar"})]})]},x.name))})]}),(a==null?void 0:a.role)==="ROOT"&&e.jsx("div",{className:"p-4 rounded-xl border",style:{backgroundColor:"rgba(139, 92, 246, 0.1)",borderColor:"rgba(139, 92, 246, 0.3)"},children:e.jsxs("p",{className:"text-sm",style:{color:"var(--color-text-secondary)"},children:["üëë ",e.jsx("strong",{children:"Modo Owner:"})," Configura las integraciones desde el panel de administraci√≥n"]})})]})}return g==="developer"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",style:{color:"var(--color-text-primary)"},children:"Desarrollador"}),e.jsx("p",{className:"text-sm",style:{color:"var(--color-text-secondary)"},children:"Herramientas y configuraci√≥n avanzada"})]}),e.jsxs("div",{className:"p-5 rounded-xl border",style:{backgroundColor:"var(--color-bg-tertiary)",borderColor:"var(--color-border)"},children:[e.jsx("h3",{className:"font-medium mb-2",style:{color:"var(--color-text-primary)"},children:"Estado del sistema"}),e.jsxs("div",{className:"space-y-2 text-sm font-mono",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--color-text-secondary)"},children:"Backend:"}),e.jsx("span",{style:{color:E==="online"?"#10b981":"#ef4444"},children:E})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--color-text-secondary)"},children:"Endpoint:"}),e.jsx("span",{style:{color:"var(--color-text-primary)"},children:"api.al-eon.com"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--color-text-secondary)"},children:"Versi√≥n:"}),e.jsx("span",{style:{color:"var(--color-text-primary)"},children:"1.0.0"})]})]})]}),_&&e.jsxs("div",{className:"p-4 rounded-xl border",style:{backgroundColor:"rgba(139, 92, 246, 0.1)",borderColor:"rgba(139, 92, 246, 0.3)"},children:[e.jsxs("p",{className:"text-sm mb-3",style:{color:"var(--color-text-secondary)"},children:["üëë ",e.jsx("strong",{children:"Modo Owner:"})," Acceso completo a herramientas de desarrollo"]}),e.jsx("button",{className:"px-4 py-2 rounded-lg text-sm font-medium transition-all",style:{backgroundColor:"var(--color-accent)",color:"white"},children:"Abrir consola de administraci√≥n"})]})]}):g==="data"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",style:{color:"var(--color-text-primary)"},children:"Datos y privacidad"}),e.jsx("p",{className:"text-sm",style:{color:"var(--color-text-secondary)"},children:"Controla tus datos y configuraci√≥n de privacidad"})]}),e.jsx("div",{className:"p-5 rounded-xl border",style:{backgroundColor:"var(--color-bg-tertiary)",borderColor:"var(--color-border)"},children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(re,{size:24,style:{color:"var(--color-accent)",flexShrink:0}}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",style:{color:"var(--color-text-primary)"},children:"Tus datos est√°n protegidos"}),e.jsx("p",{className:"text-sm mb-3",style:{color:"var(--color-text-secondary)"},children:"Usamos encriptaci√≥n de extremo a extremo y pol√≠ticas estrictas de Row Level Security (RLS) para proteger tu informaci√≥n."}),e.jsxs("ul",{className:"space-y-1 text-sm",style:{color:"var(--color-text-secondary)"},children:[e.jsx("li",{children:"‚úì Solo t√∫ puedes ver tus conversaciones"}),e.jsx("li",{children:"‚úì Los datos se almacenan de forma segura"}),e.jsx("li",{children:"‚úì Cumplimiento con GDPR y regulaciones de privacidad"})]})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{className:"w-full p-4 rounded-xl border flex items-center justify-between hover:opacity-80 transition-all",style:{backgroundColor:"var(--color-bg-tertiary)",borderColor:"var(--color-border)"},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ce,{size:20,style:{color:"var(--color-accent)"}}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",style:{color:"var(--color-text-primary)"},children:"Exportar mis datos"}),e.jsx("div",{className:"text-sm",style:{color:"var(--color-text-secondary)"},children:"Descarga una copia de toda tu informaci√≥n"})]})]})}),e.jsx("button",{className:"w-full p-4 rounded-xl border flex items-center justify-between hover:opacity-80 transition-all",style:{backgroundColor:"rgba(239, 68, 68, 0.1)",borderColor:"rgba(239, 68, 68, 0.3)"},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(we,{size:20,style:{color:"#ef4444"}}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",style:{color:"#ef4444"},children:"Eliminar mi cuenta"}),e.jsx("div",{className:"text-sm",style:{color:"var(--color-text-secondary)"},children:"Esta acci√≥n no se puede deshacer"})]})]})})]})]}):g==="notifications"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",style:{color:"var(--color-text-primary)"},children:"Notificaciones"}),e.jsx("p",{className:"text-sm",style:{color:"var(--color-text-secondary)"},children:"Gestiona c√≥mo y cu√°ndo recibes notificaciones"})]}),e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"p-5 rounded-2xl border",style:{backgroundColor:"var(--color-bg-tertiary)",borderColor:"var(--color-border)"},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-xl",style:{backgroundColor:"var(--color-accent-light)"},children:e.jsx(D,{size:24,style:{color:"var(--color-accent)"}})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-1",style:{color:"var(--color-text-primary)"},children:"Notificaciones push"}),e.jsx("p",{className:"text-sm",style:{color:"var(--color-text-secondary)"},children:"Recibe alertas de citas y eventos"})]})]}),e.jsx("button",{onClick:async()=>{const r=X();if(r==="unsupported"){alert("‚ö†Ô∏è Tu navegador no soporta notificaciones push");return}if(r==="denied"){alert("‚ùå Las notificaciones est√°n bloqueadas. Ve a Configuraci√≥n del navegador ‚Üí Permisos ‚Üí Notificaciones y permite este sitio.");return}if(r==="granted"){fe({title:"üéâ ¬°Notificaciones activas!",body:"Recibir√°s alertas de tus eventos y citas pr√≥ximas",requireInteraction:!1,vibrate:[200,100,200]}),alert("‚úÖ Notificaciones ya est√°n activadas. Se mostr√≥ una prueba.");return}await ge()&&L("push_enabled",!0)},className:"px-4 py-2 rounded-2xl text-sm font-medium",style:{backgroundColor:X()==="granted"?"#10b981":"var(--color-accent)",color:"white"},children:X()==="granted"?"‚úÖ Activado":"üîî Activar"})]})})}),e.jsxs("div",{className:"p-4 rounded-xl border",style:{backgroundColor:"rgba(239, 68, 68, 0.1)",borderColor:"rgba(239, 68, 68, 0.3)"},children:[e.jsxs("p",{className:"text-sm font-medium mb-2",style:{color:"#ef4444"},children:["üö® ",e.jsx("strong",{children:"Notificaciones URGENTES"})]}),e.jsx("p",{className:"text-sm",style:{color:"var(--color-text-secondary)"},children:"Los eventos pr√≥ximos (5-15 min) mostrar√°n alertas con vibraci√≥n y sonido para que no los pierdas."})]})]}):null}export{Be as default};
