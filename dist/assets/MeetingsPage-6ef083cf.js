import{c as _,r as o,j as e,e as q}from"./index-e4e1323c.js";import{s as Z,u as ee,g as re,a as se,b as oe,c as te}from"./meetingsService-d0e31030.js";import{i as ae,a as ne,s as le,C as F}from"./tts-d42754de.js";import{M as ce}from"./message-square-ee262869.js";import{L as T}from"./loader-2-b4ab27ec.js";import{V as ie}from"./volume-2-8c08ca19.js";import{A as de}from"./alert-circle-55dbc938.js";import{M as ue}from"./mic-5fe6cbf6.js";import{F as B}from"./file-text-dbc5a523.js";import{C as P}from"./check-circle-3feff249.js";import{S as me}from"./send-1877c269.js";import{C as xe}from"./chevron-right-8a01d50b.js";import{C as pe}from"./calendar-e8089789.js";import{C as ye}from"./clock-8cb9f32e.js";const he=_("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),ve=_("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);function be({meetingId:b,meetingResult:N}){const[i,k]=o.useState(""),[t,g]=o.useState(""),[w,E]=o.useState(!1),[h,u]=o.useState(!1),[a,j]=o.useState(""),S=o.useRef(null),p=async()=>{if(i.trim())try{E(!0),j("");const d=R(i,N);g(d),k("")}catch(d){console.error("[LiveAssistant] Error:",d),j(d.message||"No se pudo procesar la consulta")}finally{E(!1)}},R=(d,n)=>{const s=d.toLowerCase();if(s.includes("resum")||s.includes("quÃ©")||s.includes("que pasÃ³"))return(n==null?void 0:n.summary)||"Esta reuniÃ³n aÃºn no tiene resumen disponible.";if(s.includes("acuerdo")||s.includes("decidiÃ³"))return n!=null&&n.acuerdos&&n.acuerdos.length>0?`Se llegaron a ${n.acuerdos.length} acuerdos principales: ${n.acuerdos.slice(0,3).join(". ")}`:"No se registraron acuerdos especÃ­ficos en esta reuniÃ³n.";if(s.includes("tarea")||s.includes("acciÃ³n")||s.includes("pendiente")){if(n!=null&&n.tareas&&n.tareas.length>0){const l=n.tareas.slice(0,3).map(x=>typeof x=="string"?x:x.description||x.task).join(". ");return`Hay ${n.tareas.length} acciones pendientes: ${l}`}return"No se asignaron tareas especÃ­ficas en esta reuniÃ³n."}return s.includes("riesgo")||s.includes("problema")?n!=null&&n.riesgos&&n.riesgos.length>0?`Se identificaron ${n.riesgos.length} riesgos: ${n.riesgos.slice(0,2).join(". ")}`:"No se identificaron riesgos especÃ­ficos en esta reuniÃ³n.":`BasÃ¡ndome en la reuniÃ³n: ${(n==null?void 0:n.summary)||"La reuniÃ³n se completÃ³ correctamente. Consulta la transcripciÃ³n y minuta completas para mÃ¡s detalles."}`},M=async()=>{if(t){if(!ae()){j("La sÃ­ntesis de voz no estÃ¡ disponible en este navegador");return}try{h?(ne(),u(!1)):(u(!0),j(""),await le(t,{lang:"es-MX",gender:"female"}),u(!1))}catch(d){console.error("[TTS] Error:",d),j("Error al reproducir audio"),u(!1)}}},f=d=>{d.key==="Enter"&&!d.shiftKey&&(d.preventDefault(),p())};return e.jsxs("div",{className:"p-6 rounded-xl border space-y-4",style:{backgroundColor:"var(--color-bg-tertiary)",borderColor:"var(--color-border)"},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{size:20,style:{color:"var(--color-accent)"}}),e.jsx("h3",{className:"font-semibold",style:{color:"var(--color-text-primary)"},children:"Asistente en Vivo"})]}),e.jsx("p",{className:"text-sm",style:{color:"var(--color-text-secondary)"},children:"Pregunta sobre la reuniÃ³n y obtÃ©n respuestas basadas en la transcripciÃ³n y minuta"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("textarea",{ref:S,value:i,onChange:d=>k(d.target.value),onKeyPress:f,placeholder:"Â¿QuÃ© se acordÃ³ sobre el presupuesto?",className:"w-full p-3 rounded-lg border text-sm resize-none",style:{backgroundColor:"var(--color-bg-secondary)",borderColor:"var(--color-border)",color:"var(--color-text-primary)"},rows:2,disabled:w}),e.jsx("button",{onClick:p,disabled:!i.trim()||w,className:"w-full px-4 py-2 rounded-lg font-medium transition-all hover:opacity-90 disabled:opacity-50 flex items-center justify-center gap-2",style:{backgroundColor:"var(--color-accent)",color:"#FFFFFF"},children:w?e.jsxs(e.Fragment,{children:[e.jsx(T,{size:18,className:"animate-spin"}),"Consultando..."]}):"Consultar"})]}),a&&e.jsx("div",{className:"p-3 rounded-lg border text-sm",style:{backgroundColor:"rgba(239, 68, 68, 0.1)",borderColor:"rgba(239, 68, 68, 0.3)",color:"var(--color-text-primary)"},children:a}),t&&e.jsxs("div",{className:"p-4 rounded-lg border space-y-3",style:{backgroundColor:"var(--color-bg-secondary)",borderColor:"var(--color-border)"},children:[e.jsx("div",{className:"text-sm whitespace-pre-wrap",style:{color:"var(--color-text-secondary)"},children:t}),e.jsx("button",{onClick:M,disabled:h,className:"px-4 py-2 rounded-lg font-medium transition-all hover:opacity-90 flex items-center gap-2 text-sm",style:{backgroundColor:h?"#EF4444":"var(--color-accent)",color:"#FFFFFF"},children:h?e.jsxs(e.Fragment,{children:[e.jsx(ve,{size:18}),"Detener"]}):e.jsxs(e.Fragment,{children:[e.jsx(ie,{size:18}),"Responder en Voz Alta"]})})]}),!t&&!a&&!w&&e.jsx("div",{className:"p-4 rounded-lg border text-center text-sm",style:{backgroundColor:"var(--color-bg-secondary)",borderColor:"var(--color-border)",color:"var(--color-text-tertiary)"},children:"Haz una pregunta para obtener informaciÃ³n de la reuniÃ³n"})]})}const fe=7e3,$=3,ge=[300,800,1600];function je(){const[b,N]=o.useState(!1),[i,k]=o.useState(null),[t,g]=o.useState(""),[w,E]=o.useState(0),[h,u]=o.useState("idle"),[a,j]=o.useState(null),[S,p]=o.useState(""),[R,M]=o.useState(!1),[f,d]=o.useState(!1),n=o.useRef(null),s=o.useRef(null),l=o.useRef([]),x=o.useRef(0),G=o.useRef(!1),I=o.useRef(null),z=o.useRef(null),A=o.useRef(null),L=o.useRef(null);q(),o.useEffect(()=>()=>{D()},[]);const D=()=>{var r,c;I.current&&(clearInterval(I.current),I.current=null),z.current&&(clearInterval(z.current),z.current=null),A.current&&(clearInterval(A.current),A.current=null),((c=(r=n.current)==null?void 0:r.recorder)==null?void 0:c.state)==="recording"&&n.current.recorder.stop(),s.current&&(s.current.getTracks().forEach(y=>y.stop()),s.current=null)},X=async()=>{try{p(""),console.log("[MEETINGS] Iniciando reuniÃ³n en vivo...");let r;try{r=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}})}catch(C){console.error("[MEETINGS] Error de permisos de micrÃ³fono:",C),p("Permiso de micrÃ³fono denegado. ActÃ­valo en la configuraciÃ³n del navegador para grabar."),u("error");return}s.current=r;const c=await Z(`ReuniÃ³n ${new Date().toLocaleDateString("es-MX")}`);if(!(c!=null&&c.id))throw new Error("No se pudo crear la reuniÃ³n");k(c.id),u("recording"),N(!0),L.current=Date.now(),console.log("[MEETINGS] ReuniÃ³n iniciada:",c.id);const y=MediaRecorder.isTypeSupported("audio/webm;codecs=opus")?"audio/webm;codecs=opus":"audio/webm",v=new MediaRecorder(r,{mimeType:y}),m=[];v.ondataavailable=C=>{C.data.size>0&&(m.push(C.data),console.log(`[MEETINGS] Chunk capturado: ${C.data.size} bytes`))},v.onstop=()=>{if(m.length>0){const C=new Blob(m,{type:y});H(c.id,C),m.length=0}},v.start();const W=setInterval(()=>{v.state==="recording"&&(v.stop(),v.start())},fe);I.current=W,n.current={recorder:v},z.current=setInterval(()=>{E(C=>C+1)},1e3),A.current=setInterval(()=>{Q(c.id)},5e3)}catch(r){console.error("[MEETINGS] Error:",r),p(r.message||"No se pudo conectar al servidor de reuniones"),u("error"),D()}},H=(r,c)=>{x.current+=1;const y={id:x.current,meetingId:r,blob:c,retries:0,status:"pending"};l.current.push(y),console.log(`[MEETINGS] Chunk ${y.id} encolado`),K()},K=async()=>{if(!G.current&&l.current.length!==0){for(G.current=!0;l.current.length>0;){const r=l.current[0];if(r.status==="uploaded"){l.current.shift();continue}if(r.status==="failed"&&r.retries>=$){console.warn(`[MEETINGS] Chunk ${r.id} fallÃ³ despuÃ©s de ${$} reintentos`),l.current.shift();continue}try{u("uploading"),r.status="uploading",await ee(r.meetingId,r.blob,r.id,L.current),r.status="uploaded",console.log(`[MEETINGS] Chunk ${r.id} subido correctamente`),l.current.shift(),b&&u("recording")}catch(c){if(console.error(`[MEETINGS] Error subiendo chunk ${r.id}:`,c),r.retries+=1,r.status="pending",r.retries<$){const y=ge[r.retries-1]||1600;console.log(`[MEETINGS] Reintentando chunk ${r.id} en ${y}ms (intento ${r.retries}/${$})`),u("retrying"),await new Promise(v=>setTimeout(v,y))}else r.status="failed",p("Problema de red. Algunos fragmentos no se pudieron enviar.")}}G.current=!1}},Q=async r=>{try{const c=await re(r);c!=null&&c.transcript&&g(c.transcript)}catch(c){console.error("[MEETINGS] Error obteniendo estado:",c)}},O=async()=>{if(i)try{for(u("processing"),N(!1),D(),console.log("[MEETINGS] GrabaciÃ³n detenida");l.current.length>0;)await new Promise(r=>setTimeout(r,500));await se(i),console.log("[MEETINGS] Generando minuta..."),await U(i)}catch(r){console.error("[MEETINGS] Error deteniendo reuniÃ³n:",r),p(r.message||"Error al procesar la reuniÃ³n"),u("error")}},U=async r=>{let y=0;const v=async()=>{y++;try{const m=await te(r);if((m==null?void 0:m.status)==="processing"){if(y<60)setTimeout(v,5e3);else throw new Error("Tiempo de espera excedido al generar la minuta");return}if((m==null?void 0:m.status)==="done"||m!=null&&m.result)j(m.result||m),u("ready"),console.log("[MEETINGS] Minuta generada correctamente");else throw new Error("No se pudo generar la minuta")}catch(m){console.error("[MEETINGS] Error obteniendo resultado:",m),p(m.message),u("error")}};v()},Y=async()=>{if(!(!i||R))try{M(!0),p(""),await oe(i,{email:!0}),d(!0),setTimeout(()=>d(!1),3e3)}catch(r){console.error("[MEETINGS] Error enviando correo:",r),p(r.message||"No se pudo enviar el correo")}finally{M(!1)}},J=()=>{u("idle"),k(null),g(""),E(0),j(null),p(""),d(!1),x.current=0,l.current=[],L.current=null};return e.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",style:{color:"var(--color-text-primary)"},children:"Reuniones en Vivo"}),e.jsx("p",{className:"text-sm",style:{color:"var(--color-text-secondary)"},children:"Graba reuniones presenciales y genera minutas automÃ¡ticamente"})]}),(h==="idle"||h==="error")&&e.jsxs("div",{className:"space-y-4",children:[S&&e.jsxs("div",{className:"p-4 rounded-xl border flex items-start gap-3",style:{backgroundColor:"rgba(239, 68, 68, 0.1)",borderColor:"rgba(239, 68, 68, 0.3)"},children:[e.jsx(de,{size:20,className:"flex-shrink-0 mt-0.5",style:{color:"#EF4444"}}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",style:{color:"var(--color-text-primary)"},children:"Error"}),e.jsx("p",{className:"text-sm mt-1",style:{color:"var(--color-text-secondary)"},children:S})]})]}),e.jsx("div",{className:"text-center py-12",children:e.jsxs("button",{onClick:X,className:"px-8 py-4 rounded-xl font-medium transition-all hover:opacity-90 flex items-center justify-center gap-3 mx-auto text-lg",style:{backgroundColor:"var(--color-accent)",color:"#FFFFFF"},children:[e.jsx(ue,{size:24}),"Iniciar ReuniÃ³n"]})})]}),h==="recording"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-6 rounded-xl border text-center",style:{backgroundColor:"rgba(239, 68, 68, 0.1)",borderColor:"rgba(239, 68, 68, 0.3)"},children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[e.jsx("div",{className:"w-4 h-4 bg-red-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-lg font-bold",style:{color:"var(--color-text-primary)"},children:"GRABANDO"})]}),e.jsxs("p",{className:"text-sm",style:{color:"var(--color-text-secondary)"},children:["Chunks enviados: ",chunkCount]})]}),t&&e.jsxs("div",{className:"p-6 rounded-xl border",style:{backgroundColor:"var(--color-bg-tertiary)",borderColor:"var(--color-border)"},children:[e.jsxs("h3",{className:"font-semibold mb-3 flex items-center gap-2",style:{color:"var(--color-text-primary)"},children:[e.jsx(B,{size:20}),"TranscripciÃ³n en vivo"]}),e.jsx("div",{className:"text-sm whitespace-pre-wrap",style:{color:"var(--color-text-secondary)"},children:t||"Esperando transcripciÃ³n..."})]}),e.jsxs("button",{onClick:O,className:"w-full px-6 py-3 rounded-xl font-medium transition-all hover:opacity-90 flex items-center justify-center gap-2",style:{backgroundColor:"#EF4444",color:"#FFFFFF"},children:[e.jsx(he,{size:20}),"Finalizar y Generar Minuta"]})]}),h==="processing"&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(T,{size:48,className:"animate-spin mx-auto mb-4",style:{color:"var(--color-accent)"}}),e.jsx("p",{className:"text-lg font-medium",style:{color:"var(--color-text-primary)"},children:"Generando minuta..."}),e.jsx("p",{className:"text-sm mt-2",style:{color:"var(--color-text-secondary)"},children:"Esto puede tomar unos minutos"})]}),h==="ready"&&a&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-6 rounded-xl border text-center",style:{backgroundColor:"rgba(34, 197, 94, 0.1)",borderColor:"rgba(34, 197, 94, 0.3)"},children:[e.jsx(P,{size:48,className:"mx-auto mb-3",style:{color:"#22C55E"}}),e.jsx("h3",{className:"text-lg font-bold",style:{color:"var(--color-text-primary)"},children:"Minuta generada correctamente"})]}),a.transcript&&e.jsxs("div",{className:"p-6 rounded-xl border",style:{backgroundColor:"var(--color-bg-tertiary)",borderColor:"var(--color-border)"},children:[e.jsx("h3",{className:"font-semibold mb-3",style:{color:"var(--color-text-primary)"},children:"TranscripciÃ³n"}),e.jsx("div",{className:"text-sm whitespace-pre-wrap max-h-96 overflow-y-auto p-4 rounded-lg",style:{backgroundColor:"var(--color-bg-secondary)",color:"var(--color-text-secondary)"},children:a.transcript})]}),e.jsxs("div",{className:"p-6 rounded-xl border space-y-6",style:{backgroundColor:"var(--color-bg-tertiary)",borderColor:"var(--color-border)"},children:[e.jsx("h3",{className:"font-semibold text-lg",style:{color:"var(--color-text-primary)"},children:"Minuta"}),a.summary&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2 text-sm",style:{color:"var(--color-text-primary)"},children:"Resumen Ejecutivo"}),e.jsx("p",{className:"text-sm",style:{color:"var(--color-text-secondary)"},children:a.summary})]}),a.acuerdos&&a.acuerdos.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2 text-sm",style:{color:"var(--color-text-primary)"},children:"Acuerdos"}),e.jsx("ul",{className:"space-y-2",children:a.acuerdos.map((r,c)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm",style:{color:"var(--color-text-secondary)"},children:[e.jsx("span",{className:"text-accent",children:"â€¢"}),e.jsx("span",{children:r})]},c))})]}),a.tareas&&a.tareas.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2 text-sm",style:{color:"var(--color-text-primary)"},children:"Acciones"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"1px solid var(--color-border)"},children:[e.jsx("th",{className:"text-left py-2 px-3",style:{color:"var(--color-text-primary)"},children:"Tarea"}),e.jsx("th",{className:"text-left py-2 px-3",style:{color:"var(--color-text-primary)"},children:"Responsable"}),e.jsx("th",{className:"text-left py-2 px-3",style:{color:"var(--color-text-primary)"},children:"Fecha"})]})}),e.jsx("tbody",{children:a.tareas.map((r,c)=>e.jsxs("tr",{style:{borderBottom:"1px solid var(--color-border)"},children:[e.jsx("td",{className:"py-2 px-3",style:{color:"var(--color-text-secondary)"},children:typeof r=="string"?r:r.description||r.task}),e.jsx("td",{className:"py-2 px-3",style:{color:"var(--color-text-secondary)"},children:typeof r=="object"&&r.responsible||"-"}),e.jsx("td",{className:"py-2 px-3",style:{color:"var(--color-text-secondary)"},children:typeof r=="object"&&r.date||"-"})]},c))})]})})]}),a.riesgos&&a.riesgos.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2 text-sm",style:{color:"var(--color-text-primary)"},children:"Riesgos y Pendientes"}),e.jsx("ul",{className:"space-y-2",children:a.riesgos.map((r,c)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm",style:{color:"var(--color-text-secondary)"},children:[e.jsx("span",{className:"text-yellow-500",children:"âš "}),e.jsx("span",{children:r})]},c))})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:Y,disabled:R||f,className:"flex-1 px-6 py-3 rounded-xl font-medium transition-all hover:opacity-90 flex items-center justify-center gap-2 disabled:opacity-50",style:{backgroundColor:f?"#22C55E":"var(--color-accent)",color:"#FFFFFF"},children:R?e.jsxs(e.Fragment,{children:[e.jsx(T,{size:20,className:"animate-spin"}),"Enviando..."]}):f?e.jsxs(e.Fragment,{children:[e.jsx(P,{size:20}),"Enviado"]}):e.jsxs(e.Fragment,{children:[e.jsx(me,{size:20}),"Enviar por Correo"]})}),e.jsx("button",{onClick:J,className:"px-6 py-3 rounded-xl font-medium transition-all hover:opacity-90 border",style:{backgroundColor:"var(--color-bg-secondary)",borderColor:"var(--color-border)",color:"var(--color-text-primary)"},children:"Nueva ReuniÃ³n"})]}),e.jsx(be,{meetingId:i,meetingResult:a})]})]})}const V={}.VITE_CORE_BASE_URL||"https://api.al-eon.com";function Ne(){const[b,N]=o.useState([]),[i,k]=o.useState(null),[t,g]=o.useState(null),[w,E]=o.useState(!0),[h,u]=o.useState(!1),[a,j]=o.useState({transcript:!0,summary:!0,minuta:!0,acuerdos:!0,tareas:!0}),{accessToken:S}=q();o.useEffect(()=>{p()},[]);const p=async()=>{try{E(!0);const s=await fetch(`${V}/api/meetings`,{headers:{Authorization:`Bearer ${S}`}});if(!s.ok)throw new Error("Error obteniendo reuniones");const l=await s.json();l.success&&N(l.meetings||[])}catch(s){console.error("[MEETINGS] âŒ Error:",s)}finally{E(!1)}},R=async s=>{try{u(!0);const l=await fetch(`${V}/api/meetings/${s}/result`,{headers:{Authorization:`Bearer ${S}`}});if(!l.ok)throw new Error("Error obteniendo resultado");const x=await l.json();x.status==="done"&&x.result?g(x.result):x.status==="processing"?g({status:"processing"}):g({error:"No disponible"})}catch(l){console.error("[MEETINGS] âŒ Error:",l),g({error:l.message})}finally{u(!1)}},M=s=>{k(s),g(null),R(s.id)},f=s=>{j(l=>({...l,[s]:!l[s]}))},d=s=>new Date(s).toLocaleDateString("es-MX",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}),n=s=>{if(!s)return"N/A";const l=Math.floor(s/60),x=s%60;return`${l}m ${x}s`};return w?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(T,{size:48,className:"animate-spin",style:{color:"var(--color-accent)"}})}):e.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",style:{color:"var(--color-text-primary)"},children:"ðŸ“‚ Reuniones Grabadas"}),e.jsx("p",{className:"text-sm",style:{color:"var(--color-text-secondary)"},children:"Historial de reuniones y sus minutas"})]}),b.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(B,{size:48,className:"mx-auto mb-4 opacity-30",style:{color:"var(--color-text-secondary)"}}),e.jsx("p",{style:{color:"var(--color-text-secondary)"},children:"No hay reuniones grabadas aÃºn"})]}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1 space-y-3",children:b.map(s=>e.jsxs("button",{onClick:()=>M(s),className:`w-full text-left p-4 rounded-xl border transition-all hover:border-opacity-60 ${(i==null?void 0:i.id)===s.id?"ring-2":""}`,style:{backgroundColor:"var(--color-bg-tertiary)",borderColor:(i==null?void 0:i.id)===s.id?"var(--color-accent)":"var(--color-border)",ringColor:"var(--color-accent)"},children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[e.jsx("h3",{className:"font-semibold text-sm line-clamp-2",style:{color:"var(--color-text-primary)"},children:s.title||"Sin tÃ­tulo"}),e.jsx(xe,{size:16,className:(i==null?void 0:i.id)===s.id?"opacity-100":"opacity-30",style:{color:"var(--color-accent)"}})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs mb-1",style:{color:"var(--color-text-secondary)"},children:[e.jsx(pe,{size:12}),e.jsx("span",{children:d(s.created_at)})]}),s.duration&&e.jsxs("div",{className:"flex items-center gap-2 text-xs",style:{color:"var(--color-text-secondary)"},children:[e.jsx(ye,{size:12}),e.jsx("span",{children:n(s.duration)})]}),s.status&&e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:"text-xs px-2 py-1 rounded-full",style:{backgroundColor:s.status==="done"?"rgba(34, 197, 94, 0.1)":"rgba(251, 191, 36, 0.1)",color:s.status==="done"?"#22C55E":"#FBBF24"},children:s.status==="done"?"Completada":"Procesando..."})})]},s.id))}),e.jsx("div",{className:"lg:col-span-2",children:i?h?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(T,{size:32,className:"animate-spin",style:{color:"var(--color-accent)"}})}):t!=null&&t.error?e.jsx("div",{className:"p-6 rounded-xl border text-center",style:{backgroundColor:"rgba(239, 68, 68, 0.1)",borderColor:"rgba(239, 68, 68, 0.3)"},children:e.jsx("p",{style:{color:"#EF4444"},children:t.error})}):(t==null?void 0:t.status)==="processing"?e.jsxs("div",{className:"p-6 rounded-xl border text-center",style:{backgroundColor:"rgba(251, 191, 36, 0.1)",borderColor:"rgba(251, 191, 36, 0.3)"},children:[e.jsx(T,{size:32,className:"animate-spin mx-auto mb-3",style:{color:"#FBBF24"}}),e.jsx("p",{style:{color:"var(--color-text-primary)"},children:"Procesando reuniÃ³n..."})]}):t?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-6 rounded-xl border",style:{backgroundColor:"var(--color-bg-tertiary)",borderColor:"var(--color-border)"},children:[e.jsx("h2",{className:"text-xl font-bold mb-2",style:{color:"var(--color-text-primary)"},children:i.title||"Sin tÃ­tulo"}),i.description&&e.jsx("p",{className:"text-sm",style:{color:"var(--color-text-secondary)"},children:i.description})]}),t.transcript&&e.jsxs("div",{className:"rounded-xl border overflow-hidden",style:{backgroundColor:"var(--color-bg-tertiary)",borderColor:"var(--color-border)"},children:[e.jsxs("button",{onClick:()=>f("transcript"),className:"w-full p-4 flex items-center justify-between hover:opacity-80 transition-opacity",children:[e.jsxs("span",{className:"font-semibold flex items-center gap-2",style:{color:"var(--color-text-primary)"},children:[e.jsx(B,{size:18}),"TranscripciÃ³n"]}),e.jsx(F,{size:18,className:`transition-transform ${a.transcript?"":"-rotate-90"}`,style:{color:"var(--color-text-secondary)"}})]}),a.transcript&&e.jsx("div",{className:"px-4 pb-4 text-sm whitespace-pre-wrap",style:{color:"var(--color-text-secondary)"},children:t.transcript})]}),t.summary&&e.jsxs("div",{className:"rounded-xl border overflow-hidden",style:{backgroundColor:"var(--color-bg-tertiary)",borderColor:"var(--color-border)"},children:[e.jsxs("button",{onClick:()=>f("summary"),className:"w-full p-4 flex items-center justify-between hover:opacity-80 transition-opacity",children:[e.jsx("span",{className:"font-semibold",style:{color:"var(--color-text-primary)"},children:"ðŸ“‹ Resumen"}),e.jsx(F,{size:18,className:`transition-transform ${a.summary?"":"-rotate-90"}`,style:{color:"var(--color-text-secondary)"}})]}),a.summary&&e.jsx("div",{className:"px-4 pb-4 text-sm",style:{color:"var(--color-text-secondary)"},children:t.summary})]}),t.minuta&&e.jsxs("div",{className:"rounded-xl border overflow-hidden",style:{backgroundColor:"var(--color-bg-tertiary)",borderColor:"var(--color-border)"},children:[e.jsxs("button",{onClick:()=>f("minuta"),className:"w-full p-4 flex items-center justify-between hover:opacity-80 transition-opacity",children:[e.jsx("span",{className:"font-semibold",style:{color:"var(--color-text-primary)"},children:"ðŸ“„ Minuta"}),e.jsx(F,{size:18,className:`transition-transform ${a.minuta?"":"-rotate-90"}`,style:{color:"var(--color-text-secondary)"}})]}),a.minuta&&e.jsx("div",{className:"px-4 pb-4 text-sm whitespace-pre-wrap",style:{color:"var(--color-text-secondary)"},children:t.minuta})]}),t.acuerdos&&t.acuerdos.length>0&&e.jsxs("div",{className:"rounded-xl border overflow-hidden",style:{backgroundColor:"var(--color-bg-tertiary)",borderColor:"var(--color-border)"},children:[e.jsxs("button",{onClick:()=>f("acuerdos"),className:"w-full p-4 flex items-center justify-between hover:opacity-80 transition-opacity",children:[e.jsxs("span",{className:"font-semibold",style:{color:"var(--color-text-primary)"},children:["ðŸ¤ Acuerdos (",t.acuerdos.length,")"]}),e.jsx(F,{size:18,className:`transition-transform ${a.acuerdos?"":"-rotate-90"}`,style:{color:"var(--color-text-secondary)"}})]}),a.acuerdos&&e.jsx("ul",{className:"px-4 pb-4 space-y-2",children:t.acuerdos.map((s,l)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm",style:{color:"var(--color-text-secondary)"},children:[e.jsx("span",{className:"mt-1",children:"â€¢"}),e.jsx("span",{children:s})]},l))})]}),t.tareas&&t.tareas.length>0&&e.jsxs("div",{className:"rounded-xl border overflow-hidden",style:{backgroundColor:"var(--color-bg-tertiary)",borderColor:"var(--color-border)"},children:[e.jsxs("button",{onClick:()=>f("tareas"),className:"w-full p-4 flex items-center justify-between hover:opacity-80 transition-opacity",children:[e.jsxs("span",{className:"font-semibold",style:{color:"var(--color-text-primary)"},children:["âœ… Tareas (",t.tareas.length,")"]}),e.jsx(F,{size:18,className:`transition-transform ${a.tareas?"":"-rotate-90"}`,style:{color:"var(--color-text-secondary)"}})]}),a.tareas&&e.jsx("ul",{className:"px-4 pb-4 space-y-2",children:t.tareas.map((s,l)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm",style:{color:"var(--color-text-secondary)"},children:[e.jsx("span",{className:"mt-1",children:"â˜"}),e.jsx("span",{children:s})]},l))})]})]}):null:e.jsx("div",{className:"h-full flex items-center justify-center rounded-xl border",style:{backgroundColor:"var(--color-bg-tertiary)",borderColor:"var(--color-border)"},children:e.jsx("p",{style:{color:"var(--color-text-secondary)"},children:"Selecciona una reuniÃ³n"})})})]})]})}function Le(){const[b,N]=o.useState("recorder");return e.jsxs("div",{className:"min-h-screen",style:{backgroundColor:"var(--color-bg-primary)"},children:[e.jsx("div",{className:"border-b",style:{borderColor:"var(--color-border)"},children:e.jsx("div",{className:"max-w-6xl mx-auto px-6",children:e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("button",{onClick:()=>N("recorder"),className:`py-4 px-2 font-medium transition-all relative ${b==="recorder"?"opacity-100":"opacity-50 hover:opacity-75"}`,style:{color:"var(--color-text-primary)"},children:["ðŸŽ™ï¸ Grabar ReuniÃ³n",b==="recorder"&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5",style:{backgroundColor:"var(--color-accent)"}})]}),e.jsxs("button",{onClick:()=>N("history"),className:`py-4 px-2 font-medium transition-all relative ${b==="history"?"opacity-100":"opacity-50 hover:opacity-75"}`,style:{color:"var(--color-text-primary)"},children:["ðŸ“‚ Historial",b==="history"&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5",style:{backgroundColor:"var(--color-accent)"}})]})]})})}),e.jsx("div",{className:"py-6",children:b==="recorder"?e.jsx(je,{}):e.jsx(Ne,{})})]})}export{Le as default};
