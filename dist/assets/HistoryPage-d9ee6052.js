import{e as d,u as x,r as a,s as m,j as e}from"./index-e4e1323c.js";function u(){const{user:s}=d();x();const[t,c]=a.useState([]),[n,l]=a.useState(!0);a.useEffect(()=>{i()},[s]);async function i(){if(!s){l(!1);return}try{console.log("[HistoryPage] üìö Cargando conversaciones del usuario:",s.id);const{data:r,error:o}=await m.from("user_conversations").select("*").eq("user_id",s.id).order("updated_at",{ascending:!1}).limit(50);if(o)throw console.error("[HistoryPage] ‚ùå Error al cargar conversaciones:",o),o;console.log(`[HistoryPage] ‚úÖ ${(r==null?void 0:r.length)||0} conversaciones cargadas`),c(r||[])}catch(r){console.error("[HistoryPage] Error inesperado:",r)}finally{l(!1)}}return n?e.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",style:{color:"var(--color-text-primary)"},children:"Historial de Conversaciones"}),e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{style:{color:"var(--color-text-secondary)"},children:"Cargando..."})})]}):e.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",style:{color:"var(--color-text-primary)"},children:"Historial de Conversaciones"}),e.jsx("div",{className:"space-y-4",children:t.map(r=>e.jsx("div",{className:"rounded-xl shadow p-6 hover:shadow-lg transition-all cursor-pointer",style:{backgroundColor:"var(--color-bg-secondary)",border:"1px solid var(--color-border)"},children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:"var(--color-text-primary)"},children:r.title}),e.jsx("p",{className:"text-sm mb-3",style:{color:"var(--color-text-secondary)"},children:r.preview}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",style:{color:"var(--color-text-tertiary)"},children:[e.jsx("span",{children:r.date}),e.jsxs("span",{children:[r.messages," mensajes"]})]})]}),e.jsx("button",{className:"px-4 py-2 rounded-lg transition-all",style:{backgroundColor:"var(--color-accent)",color:"var(--color-text-primary)"},children:"Abrir"})]})},r.id))}),t.length===0&&e.jsx("div",{className:"text-center py-16",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("svg",{className:"w-24 h-24 mx-auto mb-6 opacity-30",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{color:"var(--color-text-tertiary)"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),e.jsx("h2",{className:"text-xl font-semibold mb-2",style:{color:"var(--color-text-primary)"},children:"No hay conversaciones a√∫n"}),e.jsx("p",{className:"text-sm mb-6",style:{color:"var(--color-text-secondary)"},children:"Las conversaciones que inicies en el chat aparecer√°n aqu√≠"}),e.jsx("a",{href:"/chat",className:"inline-block px-6 py-3 rounded-xl font-medium transition-all",style:{backgroundColor:"var(--color-accent)",color:"var(--color-text-primary)"},children:"Nueva Conversaci√≥n"})]})})]})}export{u as default};
